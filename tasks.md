# 開発ToDoリスト

## フェーズ1: 基本機能の拡充とUI改善
- [ ] **DB設計変更(Shopify対応)**
  - `Shop` テーブルを新規作成（店舗名, Shopify APIキー, ドメイン等を保存）。
  - `Product` テーブルに `shop_id` を追加し、どの店舗の商品かを紐付ける。
  - `Template` テーブルを新規作成（テンプレート名, 本文(HTML/Text)を保存）。
- [ ] **スクレイピング機能の汎用化**
  - `mercari_db.py` をリファクタリングし、サイトごとにスクレイピングロジックを分離・追加しやすい構造にする。
  - 商品URL単品での抽出機能 (`scrape_item_detail`) をWeb UIから直接呼び出せるようにする。
- [ ] **UI/UXの改善 (Flask + α)**
  - 簡易的なCSSフレームワーク（例: Bootstrap）を導入し、見た目を整える。
  - 商品一覧ページを多機能化する。
    - 商品の情報を直接編集（タイトル、価格など）できるようにする。
    - 編集内容をデータベースに保存する更新処理を追加する。
- [ ] **価格設定機能**
  - 商品一覧ページで、利益率や固定額を入力して販売価格を一括または個別に更新できるUIを作成する。
  - 計算ロジックを実装し、結果をDBに反映させる。
- [ ] **商品説明テンプレート機能**
  - テンプレートを登録・編集・削除できるUIを作成する。
  - 商品編集時に、登録したテンプレートをドロップダウン等で選択・適用できるようにする。

## フェーズ2: Shopify連携と自動化
- [ ] **Shopify CSV出力機能の強化**
  - フェーズ1で編集した最新の商品情報を元にCSVが生成されるように既存のロジックを改修する。
  - UIからCSVの生成・ダウンロードを非同期で行えるようにする（UX向上）。
- [ ] **在庫・価格チェック機能**
  - 指定した商品の仕入れ元URLを定期的にスクレイピングするバックグラウンド処理を実装する (Render Cron Job)。
  - 変更があった商品をDB上でマーキングする。
  - UI上で変更があった商品がハイライト表示されるようにする。
- [ ] **更新用CSV出力機能**
  - 在庫・価格に変更があった商品のみを対象としたShopify更新用CSVを出力する機能を追加する。

## フェーズ3: マルチアカウントとサポート機能
- [ ] **複数ショップアカウント切り替え**
  - ログイン機能またはセッション管理を導入し、操作対象のショップを切り替えられるようにする。
  - すべてのDB操作（商品登録・更新など）が、選択中のショップに対して行われるようにする。
- [ ] **チャットサポート機能**
  - 簡易的な問い合わせフォームを設置する。
  - フォームの内容をメールやチャットツール（例: Slack）で管理者に通知するバックエンド処理を実装する。

## フェーズ4: (将来) eBay対応
- [ ] **eBay連携機能**
  - Shopifyと同様の機能（CSV出力、在庫・価格更新など）をeBay向けに実装する。
