# UI/UX 包括チェックレポート（2026-01-24）

## 実施概要
- 対象: Flask テンプレート（`templates/`）と共通スタイル（`static/css/style.css`）
- 観点: 情報設計 / ナビゲーション / 一貫性 / 可読性 / 操作性 / アクセシビリティ / レスポンシブ
- 進め方: コードベースの静的レビュー（スクリーンショット取得は未実施）

---

## 総評（サマリ）
- モバイルを強く意識した構造（モバイルヘッダー + サイドバー + ボトムナビ）は良い方向性です。
- 一方で「インラインスタイル/インラインJSの多用」「アクティブ状態や意味づけの弱さ」「自動送信などの意図せぬ操作リスク」が UX と保守性の両方でボトルネックになっています。
- まずは **(1) ナビゲーションの意味づけ強化**、**(2) インライン記述のCSS集約**、**(3) フォームの安全性/明示性改善** の3点を優先すると費用対効果が高いです。

---

## 良い点（Keep）

### 1) モバイル前提のレイアウト
- `body` に `has-bottom-nav` を付与し、ボトムナビを前提にした設計になっています。
- サイドバーをモバイルではドロワーとして扱う実装も、情報量が多い管理UIと相性が良いです。

### 2) フォームの可読性配慮
- 入力要素を16pxにしてiOSズームを回避するなど、モバイル入力の実運用を踏まえた配慮があります。

---

## 課題と改善提案（優先度つき）

以下は「影響が大きい順（High → Medium → Low）」に並べています。

### High: ナビゲーションの意味づけと現在地の明確化

**現状の懸念**
- サイドバー/ボトムナビともに、視覚的な `active` クラスはありますが、スクリーンリーダーに現在地が伝わる属性がありません。
- さらにサイドバーは絵文字のみのアイコンで構成されており、意味が文脈依存になりがちです。

**根拠（コード）**
- `active` クラスによる表現のみで、`aria-current` などが未付与です。`templates/base.html`

**改善提案**
- 各ナビリンクに `aria-current="page"` を付与（アクティブ時のみ）。
- 可能であれば「パンくず」またはページ内の `section` 見出しを追加し、情報の階層を明示。
- 絵文字アイコンは残しても良いが、長期的にはSVG等の一貫したアイコン体系に置き換えると認知負荷が下がります。

---

### High: 自動送信UI（ショップ切り替え）の誤操作リスク

**現状の懸念**
- ショップ切り替えが `onchange="this.form.submit()"` で即時反映されます。
- モバイル操作では意図せぬ切り替えが発生しやすく、「なぜ表示が変わったか分からない」体験につながります。

**根拠（コード）**
- モバイルヘッダー/サイドバーのショップ選択がいずれも onchange 即送信です。`templates/base.html`

**改善提案**
- セレクトの直後に「適用」ボタンを置く、またはトーストで「ショップを切り替えました」を明示。
- 併せて、現在のショップ名をページヘッダー近辺に常時表示すると文脈が安定します。

---

### High: インラインスタイル/インラインJSの多用による一貫性崩れ

**現状の懸念**
- `templates/index.html` を中心にインラインスタイルが多く、同じ見た目でも微妙に差が出る余地があります。
- `onclick` を含むインラインJSも散見され、責務分離（HTML/CSS/JS）が崩れています。

**根拠（コード）**
- 代表例: サイトバッジやフィルタ操作部に多数のインラインスタイルがあります。`templates/index.html`
- 共通ナビ操作にも `onclick` が直接書かれています。`templates/base.html`

**改善提案**
- インラインスタイルは「意味のあるクラス」に置き換え、`style.css` へ集約。
- JSは `block scripts` でイベント登録に寄せ、HTMLからは `data-*` 属性で状態を受け渡す。

---

### Medium: フィルタUIの重複と学習コスト

**現状の懸念**
- モバイル用（`details`）とPC用でフィルタUIが重複しており、差分が生まれやすい構造です。
- UIの更新時に片方だけ修正漏れが起きると、端末によって体験がズレます。

**根拠（コード）**
- `templates/index.html` で同等のフィルタが2回定義されています。

**改善提案**
- 可能であればフィルタ部品をテンプレート分割（include化）し、差分はレイアウトだけに限定。
- もしくはCSSで折りたたみを切り替える構成にしてHTML重複を減らす。

---

### Medium: アクセシビリティ（操作対象のラベル/説明/状態）

**現状の懸念**
- いくつかのUIは視覚的には理解できても、プログラム上の意味づけが弱い箇所があります。

**観点別の提案**
- ナビ: `aria-current` の付与（前述 High）。
- 重要アクション: 危険操作はボタン文言を「削除」だけでなく対象名を含む形に（例: 「○○を削除」）。
- 画像: `alt="thumb"` のような汎用altは、最低限「商品サムネイル」など意味を持たせる。

---

### Medium: デザインシステムの“芯”がCSSに十分表現されていない

**現状の懸念**
- `:root` でトークン定義はされている一方、テンプレート側で直接色や余白を指定しており、トークンの恩恵が薄れています。

**根拠（コード）**
- デザイントークン自体は定義されています。`static/css/style.css`
- しかしテンプレートで直接色指定が頻出しています。`templates/index.html`

**改善提案**
- 例えば「バッジ」「サマリチップ」「セクションヘッダー」などの再利用クラスを定義し、テンプレートはそれを使うだけにする。

---

### Low: 見出し構造とランドマークの補強余地

**現状の懸念**
- `main` ランドマークはあるものの、スキップリンクやページ固有の `h1` へのジャンプ手段がありません。

**根拠（コード）**
- `main` は定義されています。`templates/base.html`

**改善提案**
- `body` 直下に「本文へスキップ」を追加し、キーボード操作の負担を軽減。

---

## 優先アクションプラン（次にやると良い順）

### Phase 1（低コスト・高効果）
1. ナビリンクに `aria-current="page"` を付与（アクティブ時のみ）。
2. ショップ切り替えに「適用」ボタン or 切替トーストを追加。
3. `index.html` のインラインスタイルを「バッジ」「フィルタ操作」「バッチ操作」など単位でCSSへ移管。

### Phase 2（構造の安定化）
1. フィルタUIを include 化して重複を解消。
2. 危険操作（削除など）の文言と確認導線を見直し。
3. サムネイルの `alt` を意味ある文言へ改善。

### Phase 3（体験の質を上げる）
1. パンくず or セクション見出しの導入。
2. アイコン体系の統一（絵文字→SVG等）。
3. 主要操作に対するトースト/フィードバックの標準化。

---

## 補足（今回の制約）
- 本レポートはコードベースの静的レビューです。実際の表示崩れ・余白・スクロール挙動は、ブラウザ実機確認で追加の発見が出る可能性があります。
